<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
<link rel="stylesheet" href="slides.css">
<script src="../reveal/lib/js/head.min.js"></script>
<title>Sustainable Agile Talk</title>
</head>
<body>

<div class="reveal">
<div class="slides">

	<section>
		<h2>Self-sustaining Agile<br><strong>in your project</strong></h2>
	</section>
	
	<section>placeholder section for pictures if we choose to use them
	</section>

	<section>
		<h3>What is <strong>Agile?</strong></h3> 
	</section>

	<section>
		<p>"Agile software development describes <strong>a set <br>
		of principles</strong> for software development under which <br>
		requirements and solutions evolve through the <br>
		collaborative effort of self-organizing cross-functional teams."<br>
		
		<p style="text-align: right"><strong>-- Wikipedia</strong></p>

		<aside class="notes">
			<ul>
				<li>People are most common with one or two methods. Less familiar with the principles.</li>
				<li>Which leads to...</li>
			</ul>
		</aside>

	</section>

	<section>
		<h3>It is not...</h3>
	</section>

	<section>
	<img src="dilbert.png">
		<aside class="notes">
			<ul>
				<li>Agile doesn't say you can do more with less.</li>
			</ul>
		</aside>
	</section>
	
	<section>
		<h3>Nor...</h3>
	</section>
	
	<section>
		<img src="noteasy.png">
	</section>
	
	<section>
		<h3>And certainly not...</h3>
	</section>
	
	<section data-background="bizcat.jpg">
		<h2 style="color: white; padding-top: 4em;">Do what I say.<br> and do it faster.</h2>
		<aside class="notes">
			<ul>
				<li>It's definitely not about a command and control situation.</li>
			</ul>
		</aside>
	</section>
	
	<section data-transition="fade-in fade-out">
		<h3 style="font-weight: 700; color: #999;">The <strong>point of Agile</strong> 
		 is to be able to react to changes in the market in a sustainable way.</h3>
	</section>
	
	<section data-transition="fade-in fade-out">
		<h3 style="font-weight: 700; color: #999;">The point of Agile
		 is to be able to <strong>react to changes in the market</strong> in a sustainable way.</h3>
	</section>
	
	<section data-transition="fade-in fade-out">
		<h3 style="font-weight: 700; color: #999;">The point of Agile
		 is to be able to react to changes in the market <strong>in a sustainable way.</strong></h3>
	</section>
		
	<section>
		<h3>What you need to know</h3>
	<aside class="notes">
			<ul>
				<li>stef and I are going to talk to you about what we believe are the two foundational keys to Agile</li>
				<li>This is where you need to start</li>
			</ul>
		</aside>
	</section>

	<section>
		<h3>Focus on your network of people</h3>
	</section>
		
	<section data-background="ghosthug.gif" data-background-size="contain">
		<aside class="notes">
			<ul>
				<li>Communication is the core of all things Agile. </li>
				<li>Everyone around you in the office. Not just those on your direct team.</li>
				<li>even folks who work remote need recognition, attention and respect</li>
			</ul>
		</aside>
	</section>

	<section>
	Collective ownership of work
	</section>

	<section>
		<h3>There is no <strong>I</strong> in team</h3>
		<aside class="notes">
			<ul>
				<li>COLLECTIVE OWNERSHIP OF WORK</li>
			</ul>
		</aside>

	</section>
	
	<section>
		<img src="team.png">
	</section>
	
	<section>
		<img src="doge.jpg">
		<aside class="notes">
			<ul>
				<li>ALWAYS INSPECT AND IMPROVE</li>
				<li>Work on your ability to give feedback, both positive and negative.</li>
				<li>Conflict is hard. Find an easy way to resolve conflict with your team members, even rock paper scissors can work.</li>
			</ul>
		</aside>
	</section>

	<section>
		<img src="feedback-loop.png">
		<h3>The Feedback Loop is King</h3>
	</section>

	<section>
		<h3><strong>Fundamental</strong> Feedback Loops</h3>
	</section>

	<section>
		<h3><strong>Fundamental</strong> Feedback Loops</h3>
		<div style="text-align: left; margin-left: 3em; font-size: 1.2em;">
		<ol>
			<li>Code Review</li>
			<li>Continuous Integration</li>
			<li>Continuous Delivery</li>
		</ol>
		...
		<ol>
			<li value="8">Retrospectives</li>
			<li>Stand ups</li>
		</ol>
		...
	</section>

	<section>
		<p>" Deliver working software frequently, from a<br>
		couple of weeks to a couple of months, with a<br>
		preference to the shorter timescale. "</p>
		<p style="text-align: right"><strong>-- Agile Manifesto</strong></p>
		<aside class="notes">
			<ul>
				<li>The first three principles in the Agile manifesto are about
					deliverying rapidly.</li>
			</ul>
		</aside>
	</section>

	<section data-transition="slide-in fade-out">
		<h2 style="font-weight: 700"><strong>Continuous Integration</strong></h2>
		&nbsp;<br>
		&nbsp;
		<!--
		<aside class="notes">
			<ul>
				<li>In order for "release early, release often" to actually work at
					its this pace, the software actually needs to work.</li>
				<li>Open source has typically taken the hit on delivery, when testing
					and integration wasn't advanced enough.</li>
			</ul>
		</aside>
		-->
	</section>

	<section data-transition="fade-in fade-out">
		<h2 style="font-weight: 700; color: #999;">Continuous <strong>Integration</strong></h2>
		Assemble everything together like in production,<br>and then drive it like a user.
	</section>

	<section data-transition="fade-in fade-out">
		<h2 style="font-weight: 700; color: #999;"><strong>Continuous</strong> Integration</h2>
		Do that integration for every single "change".<br>&nbsp;
	</section>

	<section data-transition="fade-in slide-out">
		<h2 style="font-weight: 700; color: #999;">Continuous <strong>Delivery</strong></h2>
		Take that integration and deliver it.<br>&nbsp;
	</section>

	<section>
		<h2><strong>What:</strong> In action<br><strong>How:</strong> In your project</h2>
	</section>

	<section>
		<img src="What-Meme.jpg">
	</section>

	<section>
		<img src="logo.png" style="width: 800px">
		<aside class="notes">
			<ul>
				<li>We'll use Cockpit as our case study today.</li>
				<li>Mostly because I'm familiar with it, and it's alweays good
					to have a solid application when discussing abstract concepts.</li>
			</ul>
		</aside>
	</section>

	<section data-background-image="cockpit-system.png" data-background-size="contain"
		data-background-color="black">
		<aside class="notes">
			<ul>
				<li>Looks like this, but you've probably seen it already.</li>
				<li>Goal: Make Linux and RHEL discoverable by broader admin audience.</li>
				<li>Goal: Make complex Linux tasks discoverable.</li>
				<li>Can't look at all the features today, but check it out.</li>
			</ul>
		</aside>
	</section>

	<section>
		<h2>Cockpit is a<br>
			<strong>remote interactive</strong><br>
			Linux admin interface</h2>
		<aside class="notes">
			<ul>
				<li>Cockpit is a *remote interactive* admin interface</li>
				<li>Cockpit runs in a browser.</li>
				<li>It's zero footprint.</li>
				<li>Use it to configure, don't configure to use.</li>
			</ul>
		</aside>
	</section>

	<section data-background="typingman.gif">
		<h2 style="color: white; padding-top: 7em;">Hackfest Room C236</h2>
	</section>

	<section>
		<h2>Cockpit calls<br>
		    <strong>System APIs directly</strong></h2>
	</section>

	<section data-transition="none">
		<img src="linux-layers.png">
	</section>

	<section>
		<h3>Cockpit <strong>contributed to</strong>:</h3>
		<table>
			<tr>
				<td>Atomic</td>
				<td>atomicapp</td>
				<td>DBus</td>
			</tr>
			<tr>
				<td>Docker</td>
				<td>docker-storage</td>
				<td>GLib</td>
			</tr>
			<tr>
				<td>journal</td>
				<td>Kubernetes</td>
				<td>libssh</td>
			</tr>
			<tr>
				<td>libvirt</td>
				<td>LVM</td>
				<td>NetworkManager</td>
			</tr>
			<tr>
				<td>Openshift</td>
				<td>ostree</td>
				<td>passwd</td>
			</tr>
			<tr>
				<td>PCP</td>
				<td>polkit</td>
				<td>react</td>
			</tr>
			<tr>
				<td>realmd</td>
				<td>sosreport</td>
				<td>setroubleshoot</td>
			</tr>
			<tr>
				<td>setenforce</td>
				<td>ssh-agent</td>
				<td>sssd</td>
			</tr>
			<tr>
				<td>storaged</td>
				<td>subscription-man</td>
				<td>sudo</td>
			</tr>
			<tr>
				<td>systemd</td>
				<td>shadow-utils</td>
				<td>timedated</td>
			</tr>
			<tr>
				<td>tuned</td>
				<td>udev</td>
				<td>udisks</td>
			</tr>
			<tr>
				<td>/proc and /sys</td>
				<td>...</td>
			</tr>
		</table>
		<aside class="notes">
			<ul>
				<li>Integrates about 50 - 100 other projects.</li>
				<li>Remember Cockpit talks directly to crazy amounts of APIs and
					system components to get its job done.</li>
				<li>And somehow we've contributed to tons of projects in order to get
					Cockpit features implemented.</li>
				<li>These are just contributions listed here, and I think I missed
					a few.</li>
			</ul>
		</aside>
	</section>

	<section data-background-video="dbus-proxy.webm">
		<aside class="notes">
			<ul>
				<li>Let's look at some examples, here's the hostnamed call we made earlier. We are typing javascript code directly in the interactive console in a
				browser. If you have Cockpit running on your system try this.</li>

				<li>It's trivial to interact with the DBUS API, easier even than if you
				were on the system itself issueing gdbus commands... but that's the point ... we are on
				the system ... logged into the system ... and the javascript code
				here is running as part of the login session.</li>

				<li>This is what got me excited about Cockpit. The very idea
				that there was code in the browser interacting directly with the system
				cutting through the usual layers of crap ... really makes building
				admin tools fun again.</li>

				<li>And of course it works both ways, changes made via the command line tools update the api and those changes are picked up by the cockpit UI in the browser.</li>
	    </ul>
		</aside>
	</section>

	<section data-background-color="black" data-background="explosion-422301_1920.jpg">
	</section>

	<section>
		<h2>Cockpit project<br>
			<strong>lives and dies<br>by its testing</strong></h2>
		<aside class="notes">
			<ul>
				<li>Due to its architecture testing and integration and vital to Cockpit.</li>
				<li>Cockpit talks to tons APIs, from systemd, ssh-agent, file formats, etc.</li>
				<li>Rather than pay the price of a massive unbounded abstraction layer,
					we've paid the price of testing well, which we need anyway.</li>
				<li>But Cockpit would grind to a halt, if we didn't test.</li>
			</ul>
		</aside>
	</section>

	<section>
		<h2><strong>10,000</strong> testing<br>instances a day</h2>
		<aside class="notes">
			<ul>
				<li>The tests in each PR boots hundreds to thousands of times before merge.</li>
				<li>On busy days we can have up to 10,000 testing instances.</li>
				<li>All before merging.</li>
			</ul>
		</aside>
	</section>

	<section data-background-color="white">
		<img src="ci_testing.png">
		<aside class="notes">
			<ul>
				<li>Real operating systems: Fedora, RHEL, Atomic, Debian</li>
				<li>Real browsers: Firefox, Chrome</li>
				<li>Not just talking about unit testing, we have a couple thousand of those.</li>
			</ul>
		</aside>
	</section>

	<section>
		<h2>It scales baaaaayyybeee!</h2>
	</section>

	<section>
		<h2>Cockpit releases weekly</h2>
		<h4>50 releases a year</h4>
	</section>

	<section>
		<h3><em>Sign a tag</em> &nbsp;&nbsp;<span class="fa">&#xf0a9;</span>&nbsp;&nbsp; <em>Becomes a release</em></h3>
		<aside class="notes">
			<ul>
				<li>This is what we do in Cockpit. Something that we have experience with.</li>
				<li>Delivering as automated releases.</li>
				<li>50 releases of Cockpit in a year.</li>
				<li>One or two broken with a core regression, releases.</li>
			</ul>
		</aside>
	</section>

	<section style="text-align: left;">
		<ul style="font-size: 1.2em; padding-left: 2em;">
			<li><em>Tarballs</em></li>
			<li><em>Scratch</em> builds</li>
			<li><em>Fedora RPM</em> spec and changelog</li>
			<li><em>Koji</em> binary build</li>
			<li><em>Bodhi</em> binary update</li>
			<li><em>COPR</em> preview builds</li>
			<li><em>Debian</em> packages</li>
			<li><em>Ubuntu PPA</em> packages</li>
			<li><em>Docker Hub</em> containers</li>
			<li><em>Upload documentation</em></li>
		</ul>
		<aside class="notes">
			<ul>
				<li>Here's what the robots do. They do this weekly.</li>
			</ul>
		</aside>
	</section>

	<section data-background-color="black">
		<img class="stretch" src="robots-1276095_b1bdc29d42_o.jpg">
		<aside class="notes">
			<ul>
				<li>So we don't test manually. Again robots to the rescue.</li>
			</ul>
		</aside>
	</section>

<!--
	<section data-background="yo-dawg.png" data-background-position="bottom right"
		data-background-size='10em'>
		<h2><strong>Test virtual machines</strong><br>
			run in<br><strong>Docker containers</strong></h2>
	</section>

	<section data-background="01-initial.png" data-background-color="white" data-background-size='100%'>
		<aside class="notes">
			<ul>
				<li>Testing is distributed and can scale up and down.</li>
				<li>Contributors can run it on your laptop.</li>
				<li>Fedora Project has donated some instances.</li>
				<li>Other random machines we found.</li>
			</ul>
		</aside>
	</section>

	<section data-background="02-tasks.png" data-background-color="white" data-background-size='100%'>
		<aside class="notes">
			<ul>
				<li>Each of these verify machines look for tasks to run.</li>
				<li>Maybe pick certain ones, or a certain operating system.</li>
			</ul>
		</aside>
	</section>

	<section data-background="03-logs.png" data-background-color="white" data-background-size='100%'>
		<aside class="notes">
			<ul>
				<li>They post their results logs, journal, screenshots to a publically
					accessible URL.</li>
				<li>Even if the verify machine doesn't run publically.</li>
			</ul>
		</aside>
	</section>

	<section data-background="04-status.png" data-background-color="white" data-background-size='100%'>
		<aside class="notes">
			<ul>
				<li>That publically accessible URL, gets posted where the contributor
					can see the failure of a given change on a given operating system.</li>
			</ul>
		</aside>
	</section>

	<section data-background="06-images.png" data-background-color="white" data-background-size='100%'>
		<aside class="notes">
			<ul>
				<li>Images.</li>
			</ul>
		</aside>
	</section>

	<section data-background="05-naughty.png" data-background-color="white" data-background-size='100%'>
		<aside class="notes">
			<ul>
				<li>Known issues.</li>
			</ul>
		</aside>
	</section>

	<section>
		<img src="test-parts.png">
	</section>
-->

	<section data-background="typingman.gif">
		<h2 style="color: white; padding-top: 7em;">Hackfest Room C236</h2>
	</section>

	<section>
		<img src="How-Meme.jpg">
	</section>

	<section style="text-align: left" data-background="flickr-14804178399-14804178399_0c2dcd89fb_o.jpg">
		<!--
		<h4>How do we get there?</h4>
		Imagine a beautiful massive tree<br>
		Imagine how many people how many years it would take to create that tree bit by bit
		-->
	</section>

	<section style="color: white;"
		data-background="seedling-kmdoncaster-flickr-26122812592_8e999a3520_o.jpg">
		<h4 style="padding-bottom: 9em">Now think about how it really works.<h4>
		<!--
		You plant a seed and a sappling grows.
		-->
	</section>

	<section style="text-align: left; color: white"
		data-background="seedling-kmdoncaster-flickr-26122812592_8e999a3520_o.jpg">
		<h4 style="padding-top: 10em; margin-left: -3em; margin-right: -3em;">
		<ol>
			<li><strong style="color: white">Tests changeable by those who make software changes</strong></li>
			<li><strong style="color: white">Post rapid feedback on each change</strong></li>
		</ol>
	</section>

	<!--
	<section style="text-align: left;">
		Less theory.<br>
		1. Make a script to build your project and run one test.<br>
		2. Make continous integration open source.<br>
		3. Rapid feedback after each change.<br>
	</section>
	-->

	<section>
		<h3>The real magic of continous<br>
		happens <strong>before you merge</strong></h3>
	</section>

	<section style="text-align: left;">
		Your CI tree:
		<ul>
			<li>Framework</li>
			<li>Test runner</li>
			<li>Upstream packaging</li>
			<li>Gating</li>
			<li>Scaling and distributed</li>
			<li>Known issues</li>
			<li>Infrastructure</li>
		</ul>
	</section>

	<section style="text-align: left; color: white"
		data-background="seedling-kmdoncaster-flickr-26122812592_8e999a3520_o.jpg">
		<h4 style="padding-top: 10em">
		<ol>
			<li><strong style="color: white">Tests changeable by those making software changes</strong></li>
			<li><strong style="color: white">Post rapid feedback on each change.</strong></li>
		</ol>
	</section>

	<section data-background="flickr-masked-builder-6131721970_357748e2ae_o.jpg">
		<h2 style="color: white; padding-top: 7em; padding-right: 3em;">Flamethrowers?</h2>
	</section>

	<section style="text-align: left; color: white"
		data-background="flickr-dvids-2807636139_04df907345_o.jpg">
		<ol style="font-size: 1.6em">
			<li>Hidden tests</li>
			<li>Nightly tests</li>
			<li>Hide the results</li>
			<li>Test after merge</li>
		</ol>
		...
	</section>

	<!--
	<section style="text-align: left;">
		Where do I run it?<br>
		* Who has hardware?<br>
		* Openshift Online<br>
		* CentOS CI<br>
		* Red Hat Platform CI<br>
		* Fedora Openstack<br>
	</section>


	-->

	<section data-background-color="black" style="color: white;">
		<img src="spec-robot.png">
	</section>

	<section>
		TODO: A verify container
	</section>

	<section>
		Semaphore CI with Docker
	</section>

	<section>
		https://github.com/cockpit-project/cockpituous/tree/master/sink
		log-data | ssh fedorapeople.org -- python sink log-identifier
		{ json data }
	</section>

	<section>
		https://github.com/cockpit-project/cockpituous/tree/master/release
		release-source
	</section>

	<section>
		release-source
	</section>

	<section>
		release-srpm
	</section>

	<section>
		release-koji
	</section>

<!--
	<section>
		<p>"Release Early. Release Often.<br>
		And listen to your customers."</p>
		<p style="text-align: right"><strong>- - Cathedral and the Bazaar</strong></p>
		<aside class="notes">
			<ul>
				<li>Said another way, this is one of the core ideas in open source.</li>
				<li>One of the key factors in the success of Linux.</li>
				<li>Users, get involved, try it out, fill a need, contribute back.</li>
				<li>Some users don't want to be part of this feedback loop, and that's fine.</li>
				<li>If the contributor feedback loop isn't small enough, you lose contributors.</li>
				<li>Drives things forward.</li>
			</ul>
		</aside>
	</section>


	<section>
		<h3>Delivering every <i>N</i> months<br>
			is <strong>not often enough</strong></h3>
		<aside class="notes">
			<ul>
				<li>Deliver here might be a release, it might be a testable runnable
					package, easy to get, easy to contribute to.</li>
				<li>To have an open source community grow, you need a feedback loop
					that's shorter than that.</li>
			</ul>
		</aside>
	</section>

	<section>
		<h2>Continuous Delivery</h2>
	</section>

	<section data-background="flickr-valkyrieh116-2431800217_a376d729ab_o.jpg">
	</section>

	<section style="text-align: left;">
		<p><strong>Maintainer release to do list:</strong></p>
		<ul>
			<li>Make sure it works</li>
			<li>Merge some last fixes</li>
			<li>lather, rinse, repeat</li>
			<li>...</li>
			<li>Tag the release</li>
			<li>Create tarballs</li>
			<li>Sign them</li>
			<li>Upload them</li>
			<li>Send out release notes</li>
			<li>...</li>
			<li><small>Profit?</small></li>
		</ul>
		<aside class="notes">
			<ul>
				<li>Hoping it's not a brown paper bag release.</li>
				<li>Doing all these steps manually, makes you not want to deliver regularly.</li>
				<li>Kills release early, release often.</li>
				<li>Releasing should be automated.</li>
			</ul>
		</aside>
	</section>

	<section style="text-align: left;">
		<p><strong>Each packager release to do list:</strong></p>
		<ul>
			<li>Download the tarball</li>
			<li>Build it</li>
			<li>Patches for differences on this distro</li>
			<li>Submit patches upstream</li>
			<li>lather, rinse, repeat</li>
			<li>...</li>
			<li>Update packaging files like spec files</li>
			<li>Perform scratch builds</li>
			<li>Commit and push changes to spec files</li>
			<li>Create an update to push update into distro</li>
			<li>...</li>
			<li><small>Profit?</small></li>
		</ul>
		<aside class="notes">
			<ul>
				<li>Doing this manually, makes impossible to release regularly.</li>
				<li>Packaging should be automated.</li>
			</ul>
		</aside>
	</section>

	<section data-background-color="black">
		<img class="stretch" src="robots-1276095_b1bdc29d42_o.jpg">
		<aside class="notes">
			<ul>
				<li>Life is too short to do all that work manually.</li>
				<li>Automation makes "release early, release often" maintain a constant pace
					indefinitely.</li>
			</ul>
		</aside>
	</section>

	<section data-state="head">
		<h2><strong>Intermission: Demo</strong></h2>
		<img src="divider-29115_1280.png" style="width: 300px">
	</section>

	<section data-transition="fade-in fade-out">
		<h2 style="font-weight: 700; color: #999;">Continuous <strong>Integration</strong></h2>
		Assemble everything together like in production,<br>and then drive it like a user.
	</section>

	<section data-transition="fade-in fade-out">
		<h2 style="font-weight: 700; color: #999;"><strong>Continuous</strong> Integration</h2>
		Do that integration for every single "change".<br>&nbsp;
	</section>

	<section style="text-align: right">
		<h3>Code &nbsp;&nbsp;<span class="fa">&#xf0a9;</span>&nbsp;&nbsp; <strong>Upstream</strong><br>
		Discussion &nbsp;&nbsp;<span class="fa">&#xf0a9;</span>&nbsp;&nbsp; <strong>Upstream</strong><br>
		Review &nbsp;&nbsp;<span class="fa">&#xf0a9;</span>&nbsp;&nbsp; <strong>Upstream</strong><br>
		Integration Testing &nbsp;&nbsp;<span class="fa">&#xf0a9;</span>&nbsp;&nbsp; <strong>Upstream</strong><br>
		Packaging &nbsp;&nbsp;<span class="fa">&#xf0a9;</span>&nbsp;&nbsp; <strong>Upstream</strong><br>
		Delivery &nbsp;&nbsp;<span class="fa">&#xf0a9;</span>&nbsp;&nbsp; <strong>Upstream</strong></h3>
		<h3>Open Source  &nbsp;&nbsp;=&nbsp;&nbsp; <strong>Upstream</strong></h3>
		<aside class="notes">
			<ul>
				<li>I'd be lying if I said this was easy. Constant care and feeding</li>
				<li>But as with everything else about open source, don't hoard it, share
					it and maintain it together.</li>
			</ul>
		</aside>
	</section>
-->

	<section style="text-align: left;"
		data-background="seedling-kmdoncaster-flickr-26122812592_8e999a3520_o.jpg">
		<h4 style="padding-top: 10em">
		<ol style="color: white">
			<li><strong style="color: white">Tests changeable by those making software changes</strong></li>
			<li><strong style="color: white">Post rapid feedback on each change.</strong></li>
		</ol>
	</section>

	<section>
		<h2><strong>Questions?
			<br><br>
			Hackfest: Room C236</strong></h2>
		<p><strong>github.com/cockpit-project/cockpituous</strong></p>

		<p>&nbsp;</p>
		<p>Credits: <strong>striatic</strong> on Flicker, <strong>Aquilae</strong> on Wikipedia, Imgflp, memegenerator</p>
		<aside class="notes">
			<ul>
			</ul>
		</aside>
	</section>

</div>
</div>

<script src="../reveal/js/reveal.js"></script>
<script src="slides.js"></script>

</body>
</html>
